{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, resolveComponent as _resolveComponent, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"contents\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"app-title\"\n}, \"Weather Forecast App\", -1);\nconst _hoisted_3 = {\n  key: 0,\n  action: \"\",\n  class: \"form-contents\"\n};\nconst _hoisted_4 = {\n  key: 1\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"invalid\"\n}, \"Invalid Input: Please type in a valid city name\", -1);\nconst _hoisted_6 = {\n  class: \"city-time\"\n};\nconst _hoisted_7 = {\n  class: \"city-info\"\n};\nconst _hoisted_8 = {\n  class: \"time-info\"\n};\nconst _hoisted_9 = {\n  class: \"current_weather\"\n};\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"h3\", {\n  class: \"weather-title\"\n}, \"Current Weather\", -1);\nconst _hoisted_11 = {\n  class: \"info\"\n};\nconst _hoisted_12 = {\n  class: \"weather-desc\"\n};\nconst _hoisted_13 = {\n  class: \"temperature-info\"\n};\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"h3\", {\n  class: \"forecast-title\"\n}, \"Weather Forecast\", -1);\nconst _hoisted_15 = [_hoisted_14];\nconst _hoisted_16 = {\n  class: \"forecast\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Chart1 = _resolveComponent(\"Chart1\");\n  const _component_Chart2 = _resolveComponent(\"Chart2\");\n  const _component_Chart3 = _resolveComponent(\"Chart3\");\n  const _component_Chart4 = _resolveComponent(\"Chart4\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, !$data.errorOccurred ? (_openBlock(), _createElementBlock(\"form\", _hoisted_3, [_withDirectives(_createElementVNode(\"input\", {\n    class: \"input-box\",\n    type: \"text\",\n    placeholder: \"type in a city name\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.keyword = $event)\n  }, null, 512), [[_vModelText, $data.keyword]]), _createElementVNode(\"input\", {\n    class: \"go-button\",\n    type: \"submit\",\n    value: \"Go\",\n    onClick: _cache[1] || (_cache[1] = _withModifiers((...args) => $options.getForecast && $options.getForecast(...args), [\"prevent\"]))\n  })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_hoisted_5, _createElementVNode(\"button\", {\n    class: \"try-again-button\",\n    onClick: _cache[2] || (_cache[2] = $event => $data.errorOccurred = false)\n  }, \"Try Again\")])), _createElementVNode(\"span\", {\n    class: _normalizeClass({\n      data: !$data.display\n    })\n  }, [_createElementVNode(\"h1\", null, _toDisplayString($data.localTime), 1), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"h2\", _hoisted_7, _toDisplayString($data.city) + \"(\" + _toDisplayString($data.country) + \")\", 1), _createElementVNode(\"h3\", _hoisted_8, \"Current Local Time: \" + _toDisplayString($data.currentTime), 1)]), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"h3\", _hoisted_12, _toDisplayString($data.current_weather_desc), 1), _createElementVNode(\"h4\", _hoisted_13, \"Temperature: \" + _toDisplayString($data.current_temp) + \"°C, Wind Speed: \" + _toDisplayString($data.current_wind) + \" meter/sec\" + _toDisplayString($data.current_rain), 1)])])], 2), _createElementVNode(\"span\", {\n    class: _normalizeClass({\n      data: !$data.display\n    })\n  }, _hoisted_15, 2), _createElementVNode(\"div\", _hoisted_16, [_createVNode(_component_Chart1, {\n    temperatureArray: $data.temperatureArray,\n    timeArray: $data.timeArray,\n    display: $data.display\n  }, null, 8, [\"temperatureArray\", \"timeArray\", \"display\"]), _createVNode(_component_Chart2, {\n    windArray: $data.windArray,\n    timeArray: $data.timeArray,\n    display: $data.display\n  }, null, 8, [\"windArray\", \"timeArray\", \"display\"]), _createVNode(_component_Chart3, {\n    rainArray: $data.rainArray,\n    rainFlagWithDate: $data.rainFlagWithDate,\n    timeArray: $data.timeArray,\n    display: $data.display\n  }, null, 8, [\"rainArray\", \"rainFlagWithDate\", \"timeArray\", \"display\"]), _createVNode(_component_Chart4, {\n    pm2_5Array: $data.pm2_5Array,\n    timeArrayForAirPollution: $data.timeArrayForAirPollution,\n    display: $data.display\n  }, null, 8, [\"pm2_5Array\", \"timeArrayForAirPollution\", \"display\"])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","action","_hoisted_14","_createElementBlock","_hoisted_1","_hoisted_2","$data","errorOccurred","_hoisted_3","type","placeholder","keyword","$event","value","onClick","_cache","_withModifiers","args","$options","getForecast","_hoisted_4","_hoisted_5","_normalizeClass","data","display","_toDisplayString","localTime","_hoisted_6","_hoisted_7","city","country","_hoisted_8","currentTime","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","current_weather_desc","_hoisted_13","current_temp","current_wind","current_rain","_hoisted_16","_createVNode","_component_Chart1","temperatureArray","timeArray","_component_Chart2","windArray","_component_Chart3","rainArray","rainFlagWithDate","_component_Chart4","pm2_5Array","timeArrayForAirPollution"],"sources":["/Users/SonodaMoeto/Desktop/Internet Application/vue-express/vue-express-sample/src/App.vue"],"sourcesContent":["<template>\n  <div class=\"contents\">\n    <h1 class=\"app-title\">Weather Forecast App</h1>\n    <form action class=\"form-contents\" v-if=\"!errorOccurred\">\n        <input class=\"input-box\" type=\"text\" placeholder=\"type in a city name\" v-model=\"keyword\">\n        <input class=\"go-button\" type=\"submit\" value=\"Go\" @click.prevent=\"getForecast\" />\n    </form>\n    <div v-else>\n      <p class=\"invalid\">Invalid Input: Please type in a valid city name</p>\n      <button class=\"try-again-button\" @click=\"errorOccurred = false\">Try Again</button>\n    </div>\n  \n    <span :class=\"{data : !display}\">\n      <h1>{{localTime}}</h1>\n      <div class=\"city-time\">\n        <h2 class=\"city-info\">{{city}}({{country}})</h2>\n        <h3 class=\"time-info\">Current Local Time: {{currentTime}}</h3>\n      </div>\n      <div class=\"current_weather\">\n        <h3 class=\"weather-title\">Current Weather</h3>\n        <div class=\"info\">\n          <h3 class=\"weather-desc\">{{current_weather_desc}}</h3>\n          <h4 class=\"temperature-info\">Temperature: {{current_temp}}°C, Wind Speed: {{current_wind}} meter/sec{{current_rain}}</h4>\n        </div>\n      </div>\n    </span>\n\n    <span :class=\"{data : !display}\">\n      <h3 class=\"forecast-title\">Weather Forecast</h3>\n    </span>\n    <div class=\"forecast\">\n      <Chart1 :temperatureArray=\"temperatureArray\" :timeArray=\"timeArray\" :display=\"display\"/>\n      <Chart2 :windArray=\"windArray\" :timeArray=\"timeArray\" :display=\"display\"/>\n      <Chart3 :rainArray=\"rainArray\" :rainFlagWithDate=\"rainFlagWithDate\" :timeArray=\"timeArray\" :display=\"display\"/>\n      <Chart4 :pm2_5Array=\"pm2_5Array\" :timeArrayForAirPollution=\"timeArrayForAirPollution\" :display=\"display\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Chart1 from './components/Chart1.vue'\nimport Chart2 from './components/Chart2.vue'\nimport Chart3 from './components/Chart3.vue'\nimport Chart4 from './components/Chart4.vue'\nimport axios from \"axios\"\n\nexport default {\n  name: 'App',\n  data() {\n    return {\n      keyword: \"\",\n      display: false,\n      country: \"\",\n      city: \"\",\n      currentTime: \"\",\n      timeArray: [],\n      temperatureArray: [],\n      windArray: [],\n      rainArray: [],\n      rainFlagWithDate: {},\n      pm2_5Array: [],\n      timeArrayForAirPollution: [],\n      current_weather_desc: \"\",\n      current_temp: \"\",\n      current_wind: \"\",\n      current_rain: \"\",\n      localTime: \"\",\n      timezoneOffset: null,\n      errorOccurred: false,\n    }\n  },\n  methods: {\n    getForecast: function() {\n      this.errorOccurred = false\n      if(this.keyword === \"\")\n      {\n          console.log(\"emp\")\n          return\n      }\n      console.log(this.keyword)\n      axios.post('http://localhost:3000/sendData', { keyword: this.keyword })\n      .then(response => {\n          console.log(response.data)\n          this.forecast(response.data)\n      })\n      .catch(error => {\n          console.error(error)\n          this.errorOccurred = true\n      })\n    },\n    forecast: function(data) {\n      this.display = true\n      const city = data.city_country[0]\n      const country = data.city_country[1]\n      this.city = city\n      this.country = country\n      \n      this.timezoneOffset = data.city.timezone\n      setInterval(this.updateLocalTime, 1000)\n\n      let text = data.current_weather.weather[0].description\n      this.current_weather_desc = text.slice( 0, 1 ).toUpperCase() + text.slice( 1 ) ;\n      this.current_temp = data.current_weather.main.temp\n      this.current_wind = data.current_weather.wind.speed\n      if(\"rain\" in data.current_weather) {\n        const rain = data.current_weather.rain[\"1h\"]\n        this.current_rain = \", Rain Volume: \" + rain + \"mm/h\"\n      }\n\n      let temperatureArray = []\n      let windArray = []\n      let rainArray = []\n      let timeArray = []\n      let rainFlagWithDate = {}\n      let datetimeArray = []\n      for(let i = 0; i < data.list.length; i++) {\n          const unix = data.list[i].dt\n          const offsetMs = this.timezoneOffset * 1000\n          const tmp = new Date();\n          let diff = tmp.getTimezoneOffset() * 60000;\n          const localTimeMs = unix * 1000 + offsetMs + diff\n          const d = new Date(localTimeMs)\n          let localDatetime = d.toLocaleString(\"en-IE\", { hour12: true, month: \"short\", day: \"2-digit\", hour: \"2-digit\"})\n          localDatetime = localDatetime.replaceAll(\".\", \"\")\n\n          datetimeArray[i] = localDatetime\n\n          //Date object returns different values depending on a web brouser\n          //For Safari\n          const num = localDatetime.indexOf(\" at\")\n          if(num != -1) {\n            localDatetime = localDatetime.replace(\" at\", \",\")\n          }\n\n          let datetimeForX = localDatetime.substring(8)\n          if(datetimeForX === \"00 am\" || datetimeForX === \"01 am\" || datetimeForX === \"02 am\" || datetimeForX === \"12 am\") {\n            datetimeForX = localDatetime.substring(0, 6)\n          }\n          else {\n            if(datetimeForX === \"00 pm\") {\n              datetimeForX = \"12 pm\"\n            }\n            datetimeForX = datetimeForX.replace(\" \", \"\")\n            let position = datetimeForX.search(\"0\")\n            if(position === 0) {\n              datetimeForX = datetimeForX.replace(\"0\", \"\")\n            }\n          }\n          timeArray[i] = datetimeForX\n          let date = localDatetime.substring(0, 6)\n          rainFlagWithDate[date] = false\n\n          const temprature = data.list[i].main.temp\n          temperatureArray[i] = temprature\n\n          const windSpeed = data.list[i].wind.speed\n          windArray[i] = windSpeed\n\n          if(\"rain\" in data.list[i]) {\n            const rainfall = data.list[i].rain[\"3h\"]\n            rainArray[i] = rainfall\n          }\n          else {\n            const rainfall = 0\n            rainArray[i] = rainfall\n          }\n      }\n      this.temperatureArray = temperatureArray\n      this.windArray = windArray\n      this.rainArray = rainArray\n      this.timeArray = timeArray\n\n      for(let p = 0; p < rainArray.length; p++) {\n        const rain = rainArray[p]\n        if(rain > 0) {\n          let datetime = datetimeArray[p]\n          let date = datetime.substring(0, 6)\n          rainFlagWithDate[date] = true\n        }\n      }\n      this.rainFlagWithDate = rainFlagWithDate\n\n      let timeArrayForAirPollution = []\n      let pm2_5Array = []\n      for(let q = 0; q < data.air_pollution.list.length; q++) {\n        const unix = data.air_pollution.list[q].dt\n        const offsetMs = this.timezoneOffset * 1000\n        const tmp = new Date();\n        let diff = tmp.getTimezoneOffset() * 60000;\n        const localTimeMs = unix * 1000 + offsetMs + diff\n        const d = new Date(localTimeMs)\n\n        let localDatetime = d.toLocaleString(\"en-IE\", { hour12: true, month: \"short\", day: \"2-digit\", hour: \"2-digit\"})\n        localDatetime = localDatetime.replaceAll(\".\", \"\")\n\n        //Date object returns different values depending on a web brouser\n        //For Safari\n        const num = localDatetime.indexOf(\" at\")\n        if(num != -1) {\n          localDatetime = localDatetime.replace(\" at\", \",\")\n        }\n\n        let datetimeForX = localDatetime.substring(8)\n        if(datetimeForX === \"00 am\" || datetimeForX === \"12 am\" || datetimeForX === \"01 am\") {\n          datetimeForX = localDatetime.substring(0, 6)\n        }\n        else {\n          if(datetimeForX === \"00 pm\") {\n            datetimeForX = \"12 pm\"\n          }\n          datetimeForX = datetimeForX.replace(\" \", \"\")\n          let position = datetimeForX.search(\"0\")\n          if(position === 0) {\n            datetimeForX = datetimeForX.replace(\"0\", \"\")\n          }\n        }\n        timeArrayForAirPollution[q] = datetimeForX\n\n        const pm2_5 = data.air_pollution.list[q].components.pm2_5\n        pm2_5Array[q] = pm2_5\n      }\n      this.pm2_5Array = pm2_5Array\n      this.timeArrayForAirPollution = timeArrayForAirPollution\n    },\n    updateLocalTime: function() {\n      if (this.timezoneOffset != null) {\n        const currentTime = new Date()\n        const utcTime = new Date(currentTime.getTime() + currentTime.getTimezoneOffset() * 60000)\n        const offsetMs = this.timezoneOffset * 1000\n        const localTimeMs = utcTime.getTime() + offsetMs\n        let localTime = new Date(localTimeMs)\n        localTime = localTime.toLocaleString('en-IE', {\n          year: \"numeric\",\n          month: \"2-digit\",\n          day: \"2-digit\",\n          hour: '2-digit',\n          minute: '2-digit',\n          second: '2-digit',\n        })\n        this.currentTime = localTime;\n      }\n    }\n  },\n  components: {\n    Chart1,\n    Chart2,\n    Chart3,\n    Chart4\n  }\n}\n</script>\n\n<style>\n#app .contents {\n  padding-left: 20px;\n}\n\n#app .app-title {\n  font-size: 50px;\n}\n\n#app .input-box {\n  width: 250px;\n  height: 40px;\n  font-size: 20px;\n}\n\n#app .go-button {\n  height: 45px;\n  font-size: 20px;\n}\n\n#app span.data {\n  display: none;\n}\n\n#app .city-time {\n  position: relative;\n}\n\n#app .city-info {\n  font-size: 45px;\n}\n\n#app .time-info {\n  font-size: 25px;\n  text-align: center;\n  position: absolute;\n\ttop: 50%;\n}\n\n#app .weather-title {\n  font-size: 30px;\n  margin-bottom: 0;\n  padding-top: 35px;\n}\n\n#app .info {\n  padding-left: 15px;\n}\n\n#app .weather-desc {\n  font-size: 25px;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n#app .temperature-info {\n  font-size: 20px;\n  margin-top: 0;\n}\n\n#app .forecast-title {\n  font-size: 30px;\n  margin-bottom: 0;\n}\n\n#app .forecast {\n  padding-left: 15px;\n}\n\n#app .invalid {\n  font-size: 25px;\n}\n\n#app .try-again-button {\n  font-size: 15px;\n  width: 200%;\n  height: 200%;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}